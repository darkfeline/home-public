#!/bin/bash
# This script mostly sets up a new Arch Linux install.
set -eu

readonly packages=(
    acpilight
    base-devel
    ed
    emacs-wayland
    flatpak
    git
    github-cli
    gtk2 # for graphical pinentry
    go
    ibus
    inetutils
    netctl
    openssh
    parallel
    syncthing
    texinfo
    vi

    # Wayland
    adobe-source-code-pro-fonts
    alacritty
    dunst
    gammastep
    grim
    hyprland
    kanshi
    niri
    polkit-kde-agent
    rofi
    slurp
    swaybg
    swayidle
    swaylock
    waybar
    wl-clipboard
    xdg-desktop-portal-hyprland
)

readonly laptop=(
    acpi
    acpid
    dialog  # for wifi-menu
    tlp
    wpa_supplicant
)

main() {
    sudo pacman -S --noconfirm "${packages[@]}"
    sudo systemctl enable xdm-archlinux.service

    sudo pacman -S --noconfirm "${laptop[@]}"
    sudo systemctl enable tlp.service
    systemctl --user enable --now check-battery.timer
}

# TODO: install aurutils:
# inputplug
# kmonad-bin
# repoctl

main "$@"
