#!/bin/bash
# PAGER dispatch script
set -eu

inpath() {
    command -v "$1" >/dev/null 2>&1
}

if [[ ${TERM:-dumb} = *dumb* ]]; then
    printf "%s: not paging for dumb term\n" "$0" >&2 && exec cat "$@"
fi

# Note that only less supports secure/restricted mode
# This may be problematic when paging from a sudo command
inpath less && exec less -dFRX "$@"
inpath more && exec more "$@"

printf '%s: No pager available\n' "$0" >&2
exit 1
